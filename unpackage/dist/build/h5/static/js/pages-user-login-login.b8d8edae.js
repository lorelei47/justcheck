(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login-login"],{"09f0":function(e,t,n){"use strict";function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,o=!1,i=void 0;try{for(var c,r=e[Symbol.iterator]();!(a=(c=r.next()).done);a=!0)if(n.push(c.value),t&&n.length===t)break}catch(s){o=!0,i=s}finally{try{a||null==r["return"]||r["return"]()}finally{if(o)throw i}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"0a9e":function(e,t,n){var a=n("d452");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("ee7a262c",a,!0,{sourceMap:!1,shadowMode:!1})},"0ce5":function(e,t,n){var a=n("24fb"),o=n("1de5"),i=n("e9fd");t=a(!1);var c=o(i);t.push([e.i,"@font-face{font-family:uniicons;font-weight:400;font-style:normal;src:url("+c+') format("truetype")}.m-icon[data-v-1a2118b5]{font-family:uniicons;\r\n\t/* font-size: 24px; */margin-left:20px;font-weight:400;font-style:normal;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased}.m-icon.uni-active[data-v-1a2118b5]{color:#007aff}.m-icon-contact[data-v-1a2118b5]:before{content:"\\e100"}.m-icon-person[data-v-1a2118b5]:before{content:"\\e101"}.m-icon-personadd[data-v-1a2118b5]:before{content:"\\e102"}.m-icon-contact-filled[data-v-1a2118b5]:before{content:"\\e130"}.m-icon-person-filled[data-v-1a2118b5]:before{content:"\\e131"}.m-icon-personadd-filled[data-v-1a2118b5]:before{content:"\\e132"}.m-icon-phone[data-v-1a2118b5]:before{content:"\\e200"}.m-icon-email[data-v-1a2118b5]:before{content:"\\e201"}.m-icon-chatbubble[data-v-1a2118b5]:before{content:"\\e202"}.m-icon-chatboxes[data-v-1a2118b5]:before{content:"\\e203"}.m-icon-phone-filled[data-v-1a2118b5]:before{content:"\\e230"}.m-icon-email-filled[data-v-1a2118b5]:before{content:"\\e231"}.m-icon-chatbubble-filled[data-v-1a2118b5]:before{content:"\\e232"}.m-icon-chatboxes-filled[data-v-1a2118b5]:before{content:"\\e233"}.m-icon-weibo[data-v-1a2118b5]:before{content:"\\e260"}.m-icon-weixin[data-v-1a2118b5]:before{content:"\\e261"}.m-icon-pengyouquan[data-v-1a2118b5]:before{content:"\\e262"}.m-icon-chat[data-v-1a2118b5]:before{content:"\\e263"}.m-icon-qq[data-v-1a2118b5]:before{content:"\\e264"}.m-icon-videocam[data-v-1a2118b5]:before{content:"\\e300"}.m-icon-camera[data-v-1a2118b5]:before{content:"\\e301"}.m-icon-mic[data-v-1a2118b5]:before{content:"\\e302"}.m-icon-location[data-v-1a2118b5]:before{content:"\\e303"}.m-icon-mic-filled[data-v-1a2118b5]:before,\r\n.m-icon-speech[data-v-1a2118b5]:before{content:"\\e332"}.m-icon-location-filled[data-v-1a2118b5]:before{content:"\\e333"}.m-icon-micoff[data-v-1a2118b5]:before{content:"\\e360"}.m-icon-image[data-v-1a2118b5]:before{content:"\\e363"}.m-icon-map[data-v-1a2118b5]:before{content:"\\e364"}.m-icon-compose[data-v-1a2118b5]:before{content:"\\e400"}.m-icon-trash[data-v-1a2118b5]:before{content:"\\e401"}.m-icon-upload[data-v-1a2118b5]:before{content:"\\e402"}.m-icon-download[data-v-1a2118b5]:before{content:"\\e403"}.m-icon-close[data-v-1a2118b5]:before{content:"\\e404"}.m-icon-redo[data-v-1a2118b5]:before{content:"\\e405"}.m-icon-undo[data-v-1a2118b5]:before{content:"\\e406"}.m-icon-refresh[data-v-1a2118b5]:before{content:"\\e407"}.m-icon-star[data-v-1a2118b5]:before{content:"\\e408"}.m-icon-plus[data-v-1a2118b5]:before{content:"\\e409"}.m-icon-minus[data-v-1a2118b5]:before{content:"\\e410"}.m-icon-circle[data-v-1a2118b5]:before,\r\n.m-icon-checkbox[data-v-1a2118b5]:before{content:"\\e411"}.m-icon-close-filled[data-v-1a2118b5]:before,\r\n.m-icon-clear[data-v-1a2118b5]:before{content:"\\e434"}.m-icon-refresh-filled[data-v-1a2118b5]:before{content:"\\e437"}.m-icon-star-filled[data-v-1a2118b5]:before{content:"\\e438"}.m-icon-plus-filled[data-v-1a2118b5]:before{content:"\\e439"}.m-icon-minus-filled[data-v-1a2118b5]:before{content:"\\e440"}.m-icon-circle-filled[data-v-1a2118b5]:before{content:"\\e441"}.m-icon-checkbox-filled[data-v-1a2118b5]:before{content:"\\e442"}.m-icon-closeempty[data-v-1a2118b5]:before{content:"\\e460"}.m-icon-refreshempty[data-v-1a2118b5]:before{content:"\\e461"}.m-icon-reload[data-v-1a2118b5]:before{content:"\\e462"}.m-icon-starhalf[data-v-1a2118b5]:before{content:"\\e463"}.m-icon-spinner[data-v-1a2118b5]:before{content:"\\e464"}.m-icon-spinner-cycle[data-v-1a2118b5]:before{content:"\\e465"}.m-icon-search[data-v-1a2118b5]:before{content:"\\e466"}.m-icon-plusempty[data-v-1a2118b5]:before{content:"\\e468"}.m-icon-forward[data-v-1a2118b5]:before{content:"\\e470"}.m-icon-back[data-v-1a2118b5]:before,\r\n.m-icon-left-nav[data-v-1a2118b5]:before{content:"\\e471"}.m-icon-checkmarkempty[data-v-1a2118b5]:before{content:"\\e472"}.m-icon-home[data-v-1a2118b5]:before{content:"\\e500"}.m-icon-navigate[data-v-1a2118b5]:before{content:"\\e501"}.m-icon-gear[data-v-1a2118b5]:before{content:"\\e502"}.m-icon-paperplane[data-v-1a2118b5]:before{content:"\\e503"}.m-icon-info[data-v-1a2118b5]:before{content:"\\e504"}.m-icon-help[data-v-1a2118b5]:before{content:"\\e505"}.m-icon-locked[data-v-1a2118b5]:before{content:"\\e506"}.m-icon-more[data-v-1a2118b5]:before{content:"\\e507"}.m-icon-flag[data-v-1a2118b5]:before{content:"\\e508"}.m-icon-home-filled[data-v-1a2118b5]:before{content:"\\e530"}.m-icon-gear-filled[data-v-1a2118b5]:before{content:"\\e532"}.m-icon-info-filled[data-v-1a2118b5]:before{content:"\\e534"}.m-icon-help-filled[data-v-1a2118b5]:before{content:"\\e535"}.m-icon-more-filled[data-v-1a2118b5]:before{content:"\\e537"}.m-icon-settings[data-v-1a2118b5]:before{content:"\\e560"}.m-icon-list[data-v-1a2118b5]:before{content:"\\e562"}.m-icon-bars[data-v-1a2118b5]:before{content:"\\e563"}.m-icon-loop[data-v-1a2118b5]:before{content:"\\e565"}.m-icon-paperclip[data-v-1a2118b5]:before{content:"\\e567"}.m-icon-eye[data-v-1a2118b5]:before{content:"\\e568"}.m-icon-arrowup[data-v-1a2118b5]:before{content:"\\e580"}.m-icon-arrowdown[data-v-1a2118b5]:before{content:"\\e581"}.m-icon-arrowleft[data-v-1a2118b5]:before{content:"\\e582"}.m-icon-arrowright[data-v-1a2118b5]:before{content:"\\e583"}.m-icon-arrowthinup[data-v-1a2118b5]:before{content:"\\e584"}.m-icon-arrowthindown[data-v-1a2118b5]:before{content:"\\e585"}.m-icon-arrowthinleft[data-v-1a2118b5]:before{content:"\\e586"}.m-icon-arrowthinright[data-v-1a2118b5]:before{content:"\\e587"}.m-icon-pulldown[data-v-1a2118b5]:before{content:"\\e588"}.m-icon-scan[data-v-1a2118b5]:before{content:"\\e612"}',""]),e.exports=t},"0d21":function(e,t,n){"use strict";function a(e){if(Array.isArray(e))return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"16ea":function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"m-icon",class:["m-icon-"+e.type],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick()}}})},i=[]},1836:function(e,t,n){"use strict";var a=n("8047"),o=n.n(a);o.a},"18b0":function(e,t,n){"use strict";n.r(t);var a=n("6912"),o=n("9fe2");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("cd1f");var c,r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"338c761e",null,!1,a["a"],c);t["default"]=s.exports},"1de5":function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},"21cc":function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".m-input-view[data-v-338c761e]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;\n\t/* width: 100%; */-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:0 10px}.m-input-input[data-v-338c761e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;width:100%;height:20px;line-height:20px;background-color:transparent}.m-input-icon[data-v-338c761e]{\n\t/* width: 20px; */font-size:20px;line-height:20px;color:#666}",""]),e.exports=t},2756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={props:{type:String},methods:{onClick:function(){this.$emit("click")}}};t.default=a},"2fed":function(e,t,n){"use strict";n.r(t);var a=n("16ea"),o=n("e4f6");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("1836");var c,r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"1a2118b5",null,!1,a["a"],c);t["default"]=s.exports},3835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=r(n("0d21")),o=r(n("09f0")),i=r(n("06c5")),c=r(n("3d8c"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return(0,a.default)(e)||(0,o.default)(e,t)||(0,i.default)(e,t)||(0,c.default)()}},"3d8c":function(e,t,n){"use strict";function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},6912:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"m-input-view"},[n("v-uni-input",{staticClass:"m-input-input",attrs:{focus:e.focus,type:e.inputType,value:e.value,placeholder:e.placeholder,password:"password"===e.type&&!e.showPassword},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.onInput.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.onFocus.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.onBlur.apply(void 0,arguments)}}}),e.clearable&&!e.displayable&&e.value.length?n("v-uni-view",{staticClass:"m-input-icon"},[n("m-icon",{attrs:{color:"#666666",type:"clear"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clear.apply(void 0,arguments)}}})],1):e._e(),e.displayable?n("v-uni-view",{staticClass:"m-input-icon"},[n("m-icon",{style:{color:e.showPassword?"#666666":"#cccccc"},attrs:{type:"eye"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.display.apply(void 0,arguments)}}})],1):e._e()],1)},i=[]},8047:function(e,t,n){var a=n("0ce5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("07d72930",a,!0,{sourceMap:!1,shadowMode:!1})},"929d":function(e,t,n){"use strict";n.r(t);var a=n("ffbd"),o=n("e62e");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("f9df");var c,r=n("f0c5"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"e83443aa",null,!1,a["a"],c);t["default"]=s.exports},"9b69":function(e,t,n){"use strict";var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("2fed")),i={components:{mIcon:o.default},props:{type:String,value:String,placeholder:String,clearable:{type:[Boolean,String],default:!1},displayable:{type:[Boolean,String],default:!1},focus:{type:[Boolean,String],default:!1}},model:{prop:"value",event:"input"},data:function(){return{showPassword:!1,isFocus:!1}},computed:{inputType:function(){var e=this.type;return"password"===e?"text":e}},methods:{clear:function(){this.$emit("input","")},display:function(){this.showPassword=!this.showPassword},onFocus:function(){this.isFocus=!0},onBlur:function(){var e=this;this.$nextTick((function(){e.isFocus=!1}))},onInput:function(e){this.$emit("input",e.detail.value)}}};t.default=i},"9fe2":function(e,t,n){"use strict";n.r(t);var a=n("9b69"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},a25b:function(e,t,n){var a=n("21cc");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("b097be50",a,!0,{sourceMap:!1,shadowMode:!1})},ae1c:function(e,t,n){"use strict";(function(e,a){var o=n("4ea4");n("99af"),n("c975"),n("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.univerifyLogin=c,t.univerifyErrorHandler=r;var i=o(n("74c8"));function c(){var t=i.default.commit,n="univerify";return new Promise((function(o,i){uni.getProvider({service:"oauth",success:function(c){-1!==c.provider.indexOf(n)?uni.login({provider:n,success:function(n){uni.closeAuthView(),uni.showLoading(),e.callFunction({name:"user-center",data:{action:"loginByUniverify",params:n.authResult},success:function(e){if(a("log","login success",e," at common/univerify.js:30"),0==e.result.code){var n=e.result.username||e.result.mobile||"一键登录新用户";uni.setStorageSync("uni_id_token",e.result.token),uni.setStorageSync("username",n),uni.setStorageSync("login_type","online"),t("login",n),o(),uni.switchTab({url:"../main/main"})}else uni.showModal({title:"登录失败: ".concat(e.result.code),content:e.result.message,showCancel:!1}),a("log","登录失败",e," at common/univerify.js:51"),e.result.errMsg=e.result.message},fail:function(e){uni.showModal({title:"登录失败",content:e.errMsg,showCancel:!1})},complete:function(){uni.hideLoading()}})},fail:function(e){return a("error","授权登录失败："+JSON.stringify(e)," at common/univerify.js:69"),30002==e.code?(uni.closeAuthView(),void i(!0)):30003==e.code?(uni.closeAuthView(),void i(!1)):void i(e)}}):i()},fail:function(e){a("error","获取服务供应商失败："+e.errMsg," at common/univerify.js:93"),i(e)}})}))}function r(e,t){if(e){i.default.state;var n={};switch(!0){case 1e3==e.code:uni.showModal(Object.assign({title:"登录失败",content:"".concat(e.errMsg,"，错误码：").concat(e.code,"\n开通指南：https://ask.dcloud.net.cn/article/37965")},n));break;case 30005==e.code:uni.showModal(Object.assign({showCancel:!1,title:"预登录失败",content:"".concat(e.errMsg,"，错误码：").concat(e.code)},n));break;case 30003!=e.code:uni.showModal(Object.assign({showCancel:!1,title:"登录失败",content:"".concat(e.errMsg,"，错误码：").concat(e.code)},n));break}}else t&&t()}}).call(this,n("a9ff")["default"],n("0de9")["log"])},cab7:function(e,t,n){"use strict";(function(e,a){var o=n("4ea4");n("c975"),n("d3b7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("3835"));n("96cf");var c=o(n("1da1")),r=o(n("5530")),s=n("2f62"),u=o(n("18b0")),l=n("ae1c"),d=n("d3a4"),f={deviceId:(0,d.getDeviceUUID)(),scene:"login"},p={components:{mInput:u.default},data:function(){return{platform:uni.getSystemInfoSync().platform,mobile:"",code:"",providerList:[],hasProvider:!1,username:"",password:"",positionTop:0,isDevtools:!1,loginBtnLoading:!1,hasAppleLogin:!1,needCaptcha:uni.getStorageSync("uni-needCaptcha"),captchaing:!1,captchaBase64:"",captchaText:""}},computed:(0,s.mapState)(["forcedLogin","hasLogin","univerifyErrorMsg","hideUniverify"]),onLoad:function(){this.needCaptcha&&this.captcha("createCaptcha")},methods:(0,r.default)((0,r.default)({},(0,s.mapMutations)(["login"])),{},{initProvider:function(){var t=this,n=["weixin","qq","sinaweibo","univerify"];uni.getProvider({service:"oauth",success:function(e){if(e.provider&&e.provider.length){-1!==e.provider.indexOf("apple")&&(t.hasAppleLogin=!0);for(var a=0;a<e.provider.length;a++){var o=e.provider[a];~n.indexOf(o)&&t.providerList.push({value:o,image:"../../static/img/"+o+".png"})}t.hasProvider=!0}},fail:function(t){e("error","获取服务供应商失败："+JSON.stringify(t)," at pages/user/login/login.vue:127")}})},initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},loginByPwd:function(){var e=this;return(0,c.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.username.length<3)){t.next=3;break}return uni.showToast({icon:"none",title:"账号最短为 3 个字符"}),t.abrupt("return");case 3:if(!(e.password.length<6)){t.next=6;break}return uni.showToast({icon:"none",title:"密码最短为 6 个字符"}),t.abrupt("return");case 6:n=(0,r.default)({username:e.username,password:e.password,captcha:e.captchaText},f),e.loginBtnLoading=!0,a.callFunction({name:"user-center",data:{action:"login",params:n},success:function(t){0==t.result.code?(e.needCaptcha=!1,uni.setStorageSync("uni-needCaptcha",e.needCaptcha),uni.setStorageSync("uni_id_token",t.result.token),uni.setStorageSync("username",t.result.username),uni.setStorageSync("login_type","online"),uni.setStorageSync("uni_id_has_pwd",!0),e.toMain(e.username)):(uni.showModal({content:t.result.message,showCancel:!1}),e.needCaptcha=t.result.needCaptcha,uni.setStorageSync("uni-needCaptcha",e.needCaptcha),e.needCaptcha&&e.captcha("createCaptcha"))},fail:function(e){uni.showModal({content:JSON.stringify(e),showCancel:!1})},complete:function(){e.loginBtnLoading=!1}});case 9:case"end":return t.stop()}}),t)})))()},loginBySms:function(){var t=this;/^1\d{10}$/.test(this.mobile)?/^\d{6}$/.test(this.code)?a.callFunction({name:"user-center",data:{action:"loginBySms",params:{mobile:this.mobile,code:this.code}},success:function(n){if(e("log","login success",n," at pages/user/login/login.vue:231"),0==n.result.code){var a=n.result.username||"新用户";uni.setStorageSync("uni_id_token",n.result.token),uni.setStorageSync("username",a),uni.setStorageSync("login_type","online"),t.toMain(a)}else uni.showModal({content:n.result.msg,showCancel:!1}),e("log","登录失败",n," at pages/user/login/login.vue:244")},fail:function(e){uni.showModal({content:JSON.stringify(e),showCancel:!1})}}):uni.showModal({title:"验证码为6位纯数字",showCancel:!1}):uni.showModal({content:"手机号码填写错误",showCancel:!1})},bindLogin:function(){this.loginByPwd()},oauth:function(e){return new Promise((function(e,t){}))},getUserInfo:function(t){var n=t.detail;e("log","三方登录只演示登录api能力，暂未关联云端数据"," at pages/user/login/login.vue:286"),n.userInfo?this.loginLocal(n.userInfo.nickName):uni.showToast({icon:"none",title:"登陆失败"})},loginLocal:function(e){uni.setStorageSync("login_type","local"),uni.setStorageSync("username",e),this.toMain(e)},toMain:function(e){this.login(e),uni.reLaunch({url:"../../tabbar/user/user"})},toLogin:function(t){var n=this;"apple"!==t?"weixin"!==t?"univerify"!==t?uni.showModal({content:"".concat(t,"登录只演示登录api能力，暂未关联云端数据"),showCancel:!1,complete:function(){e("log","".concat(t,"登录只演示登录api能力，暂未关联云端数据")," at pages/user/login/login.vue:331"),uni.login({provider:t,success:function(e){uni.getUserInfo({provider:t,success:function(e){n.loginLocal(e.userInfo.nickName)},fail:function(){uni.showToast({icon:"none",title:"登陆失败"})}})},fail:function(t){e("error","授权登录失败："+JSON.stringify(t)," at pages/user/login/login.vue:353")}})}}):(0,l.univerifyLogin)().catch((function(e){"boolean"!==typeof e&&(0,l.univerifyErrorHandler)(e)})):this.loginByWeixin(t):this.loginByApple(t)},loginByWeixin:function(t){var n=this;this.oauth(t).then((function(e){return a.callFunction({name:"user-center",data:{action:"loginByWeixin",params:{code:e}}})})).then((function(e){0===e.result.code&&(uni.setStorageSync("uni_id_token",e.result.token),uni.setStorageSync("uni_id_token_expired",e.result.tokenExpired),uni.setStorageSync("login_type","online"),uni.setStorageSync("username","微信用户"),n.toMain("微信用户"))})).catch((function(t){e("error",t," at pages/user/login/login.vue:380"),uni.showModal({showCancel:!1,content:"微信登录失败，请稍后再试"})}))},loginByApple:function(t){var n=this;return(0,c.default)(regeneratorRuntime.mark((function o(){var c,r,s,u,l,d,f,p,b;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n.hasAppleLogin){o.next=3;break}return uni.showModal({showCancel:!1,content:"暂无法使用苹果登录，Apple登录集成教程：\nhttps://ask.dcloud.net.cn/article/36651"}),o.abrupt("return");case 3:return c=t,o.next=7,uni.login({provider:c});case 7:if(r=o.sent,s=(0,i.default)(r,2),u=s[0],s[1],!u){o.next=14;break}return uni.showModal({showCancel:!1,content:"苹果登录失败，请稍后再试"}),o.abrupt("return");case 14:return o.next=16,uni.getUserInfo({provider:c});case 16:if(l=o.sent,d=(0,i.default)(l,2),f=d[0],p=d[1],!f){o.next=25;break}return b=f.errMsg,~b.indexOf("uni.login")&&(b="请先完成登录操作"),uni.showModal({title:"获取用户信息失败",content:"错误原因"+b,showCancel:!1}),o.abrupt("return");case 25:a.callFunction({name:"user-center",data:{action:"loginByApple",params:p.userInfo},success:function(t){if(e("log","loginByApple success",t," at pages/user/login/login.vue:430"),t.success){var a=t.result.username||t.result.nickname;uni.setStorageSync("uni_id_token",t.result.token),uni.setStorageSync("login_type","online"),n.toMain(a)}else uni.showModal({showCancel:!1,content:JSON.stringify(t.message)})},fail:function(e){uni.showModal({content:"苹果登录失败: ".concat(JSON.stringify(e)),showCancel:!1})}});case 26:case"end":return o.stop()}}),o)})))()},captcha:function(e,t){var n=this;return(0,c.default)(regeneratorRuntime.mark((function o(){var i,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!n.captchaing){o.next=2;break}return o.abrupt("return");case 2:return n.captchaing=!0,o.next=5,a.callFunction({name:"user-center",data:{action:e,params:(0,r.default)((0,r.default)({},f),t)}});case 5:return i=o.sent,c=i.result,n.captchaing=!1,0===c.code?n.captchaBase64=c.captchaBase64:uni.showToast({icon:"none",title:c.message,duration:1e3}),o.abrupt("return",c);case 10:case"end":return o.stop()}}),o)})))()},openAppleLoginDoc:function(){}}),onReady:function(){this.initPosition(),this.initProvider()}};t.default=p}).call(this,n("0de9")["log"],n("a9ff")["default"])},cd1f:function(e,t,n){"use strict";var a=n("a25b"),o=n.n(a);o.a},d3a4:function(e,t,n){"use strict";function a(e){var t={year:"%n% 年前",month:"%n% 月前",day:"%n% 天前",hour:"%n% 小时前",minute:"%n% 分钟前",second:"%n% 秒前"},n=Date.now(),a=Math.floor((n-e)/1e3),o=Math.floor(a/60),i=Math.floor(o/60),c=Math.floor(i/24),r=Math.floor(c/30),s=Math.floor(r/12),u="",l=0;return s>0?(u="year",l=s):r>0?(u="month",l=r):c>0?(u="day",l=c):i>0?(u="hour",l=i):o>0?(u="minute",l=o):(u="second",l=0===a?a=1:a),t[u].replace("%n%",l)}function o(){var e=uni.getStorageSync("uni_deviceId")||uni.getSystemInfoSync().deviceId||uni.getSystemInfoSync().system+"_"+Math.random().toString(36).substr(2);return uni.setStorageSync("uni_deviceId",e),e}n("d3b7"),n("ac1f"),n("25f0"),n("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.friendlyDate=a,t.getDeviceUUID=o},d452:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".login-type[data-v-e83443aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.login-type-btn[data-v-e83443aa]{line-height:30px;margin:0 15px}.login-type-btn.act[data-v-e83443aa]{color:#0faeff;border-bottom:solid 1px #0faeff}.action-row[data-v-e83443aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.action-row uni-navigator[data-v-e83443aa]{color:#237f41;padding:0 10px}.oauth-row[data-v-e83443aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-around;justify-content:space-around;-webkit-flex-wrap:wrap;flex-wrap:wrap;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-e83443aa]{position:relative;width:50px;height:50px;border:1px solid #ddd;border-radius:50px;background-color:#fff}.oauth-image uni-image[data-v-e83443aa]{width:30px;height:30px;margin:10px}.oauth-image uni-button[data-v-e83443aa]{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0}.captcha-view[data-v-e83443aa]{line-height:0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;position:relative;background-color:#f3f3f3}",""]),e.exports=t},e4f6:function(e,t,n){"use strict";n.r(t);var a=n("2756"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},e62e:function(e,t,n){"use strict";n.r(t);var a=n("cab7"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},e9fd:function(e,t,n){e.exports=n.p+"static/fonts/uni.75745d34.ttf"},f9df:function(e,t,n){"use strict";var a=n("0a9e"),o=n.n(a);o.a},ffbd:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content-login"},[n("v-uni-view",{staticClass:"input-group"},[n("v-uni-view",{staticClass:"input-row border"},[n("v-uni-text",{staticClass:"title"},[e._v("账号：")]),n("m-input",{staticClass:"m-input",attrs:{type:"text",clearable:!0,focus:!0,placeholder:"请输入账号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-uni-view",{staticClass:"input-row border"},[n("v-uni-text",{staticClass:"title"},[e._v("密码：")]),n("m-input",{attrs:{type:"password",displayable:!0,placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e.needCaptcha?n("v-uni-view",{staticClass:"input-row"},[n("v-uni-text",{staticClass:"title"},[e._v("验证码：")]),n("m-input",{attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.captchaText,callback:function(t){e.captchaText=t},expression:"captchaText"}}),n("v-uni-view",{staticClass:"send-code-btn captcha-view",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.captcha("refreshCaptcha")}}},[e.captchaing?n("i",{staticClass:"uni-icon_toast uni-loading"}):e._e(),e.captchaing?e._e():n("img",{attrs:{src:e.captchaBase64,width:"100%",height:"100%"}})])],1):e._e()],1),n("v-uni-view",{staticClass:"btn-row"},[n("v-uni-button",{staticClass:"login-btn",attrs:{loading:e.loginBtnLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindLogin.apply(void 0,arguments)}}},[e._v("登录")])],1),n("v-uni-view",{staticClass:"action-row"},[n("v-uni-navigator",{attrs:{url:"../reg/reg"}},[e._v("注册账号")])],1),e.hasProvider?n("v-uni-view",{staticClass:"oauth-row",style:{top:e.positionTop+"px"}},e._l(e.providerList,(function(t){return n("v-uni-view",{key:t.value,staticClass:"oauth-image"},[n("v-uni-image",{attrs:{src:t.image},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.toLogin(t.value)}}})],1)})),1):e._e(),e.hasProvider&&!e.hasAppleLogin&&"ios"===e.platform?n("v-uni-view",{staticClass:"oauth-row",style:{top:e.positionTop-50+"px"}},[n("v-uni-text",{staticStyle:{color:"#C8C7CC","text-align":"center"}},[e._v("暂无法使用苹果登录，请查阅"),n("v-uni-text",{staticStyle:{color:"#C8C7CC","text-decoration":"underline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openAppleLoginDoc.apply(void 0,arguments)}}},[e._v("Apple登录集成教程")])],1)],1):e._e()],1)},i=[]}}]);